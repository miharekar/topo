(function(){!function(t){function o(){try{return l in t&&t[l]}catch(o){return!1}}function e(t){return function(){var o=Array.prototype.slice.call(arguments,0);o.unshift(s),c.appendChild(s),s.addBehavior("#default#userData"),s.load(l);var e=t.apply(i,o);return c.removeChild(s),e}}function n(t){return t.replace(/^d/,"___$&").replace(p,"___")}var i={},a=t.document,l="localStorage",r="script",s;if(i.disabled=!1,i.set=function(t,o){},i.get=function(t){},i.remove=function(t){},i.clear=function(){},i.transact=function(t,o,e){var n=i.get(t);null==e&&(e=o,o=null),"undefined"==typeof n&&(n=o||{}),e(n),i.set(t,n)},i.getAll=function(){},i.forEach=function(){},i.serialize=function(t){return JSON.stringify(t)},i.deserialize=function(t){if("string"!=typeof t)return void 0;try{return JSON.parse(t)}catch(o){return t||void 0}},o())s=t[l],i.set=function(t,o){return void 0===o?i.remove(t):(s.setItem(t,i.serialize(o)),o)},i.get=function(t){return i.deserialize(s.getItem(t))},i.remove=function(t){s.removeItem(t)},i.clear=function(){s.clear()},i.getAll=function(){var t={};return i.forEach(function(o,e){t[o]=e}),t},i.forEach=function(t){for(var o=0;o<s.length;o++){var e=s.key(o);t(e,i.get(e))}};else if(a.documentElement.addBehavior){var c,u;try{u=new ActiveXObject("htmlfile"),u.open(),u.write("<"+r+">document.w=window</"+r+'><iframe src="/favicon.ico"></iframe>'),u.close(),c=u.w.frames[0].document,s=c.createElement("div")}catch(d){s=a.createElement("div"),c=a.body}var p=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^{|}~]","g");i.set=e(function(t,o,e){return o=n(o),void 0===e?i.remove(o):(t.setAttribute(o,i.serialize(e)),t.save(l),e)}),i.get=e(function(t,o){return o=n(o),i.deserialize(t.getAttribute(o))}),i.remove=e(function(t,o){o=n(o),t.removeAttribute(o),t.save(l)}),i.clear=e(function(t){var o=t.XMLDocument.documentElement.attributes;t.load(l);for(var e=0,n;n=o[e];e++)t.removeAttribute(n.name);t.save(l)}),i.getAll=function(t){var o={};return i.forEach(function(t,e){o[t]=e}),o},i.forEach=e(function(t,o){for(var e=t.XMLDocument.documentElement.attributes,n=0,a;a=e[n];++n)o(a.name,i.deserialize(t.getAttribute(a.name)))})}try{var m="__storejs__";i.set(m,m),i.get(m)!=m&&(i.disabled=!0),i.remove(m)}catch(d){i.disabled=!0}i.enabled=!i.disabled,"undefined"!=typeof module&&module.exports&&this.module!==module?module.exports=i:"function"==typeof define&&define.amd?define(i):t.store=i}(Function("return this")()),function(t,o){o.Google=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,mapOptions:{backgroundColor:"#dddddd"}},initialize:function(e,n){o.Util.setOptions(this,n),this._ready=void 0!==t.maps.Map,this._ready||o.Google.asyncWait.push(this),this._type=e||"SATELLITE"},onAdd:function(t,e){this._map=t,this._insertAtTheBottom=e,this._initContainer(),this._initMapObject(),t.on("viewreset",this._resetCallback,this),this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),t.on("move",this._update,this),t.on("zoomanim",this._handleZoomAnim,this),t._controlCorners.bottomright.style.marginBottom="20px",this._reset(),this._update()},onRemove:function(t){this._map._container.removeChild(this._container),this._map.off("viewreset",this._resetCallback,this),this._map.off("move",this._update,this),this._map.off("zoomanim",this._handleZoomAnim,this),t._controlCorners.bottomright.style.marginBottom="0em"},getAttribution:function(){return this.options.attribution},setOpacity:function(t){this.options.opacity=t,1>t&&o.DomUtil.setOpacity(this._container,t)},setElementSize:function(t,o){t.style.width=o.x+"px",t.style.height=o.y+"px"},_initContainer:function(){var t=this._map._container,e=t.firstChild;this._container||(this._container=o.DomUtil.create("div","leaflet-google-layer leaflet-top leaflet-left"),this._container.id="_GMapContainer_"+o.Util.stamp(this),this._container.style.zIndex="auto"),t.insertBefore(this._container,e),this.setOpacity(this.options.opacity),this.setElementSize(this._container,this._map.getSize())},_initMapObject:function(){if(this._ready){this._google_center=new t.maps.LatLng(0,0);var o=new t.maps.Map(this._container,{center:this._google_center,zoom:0,tilt:0,mapTypeId:t.maps.MapTypeId[this._type],disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.mapOptions.styles,backgroundColor:this.options.mapOptions.backgroundColor}),e=this;this._reposition=t.maps.event.addListenerOnce(o,"center_changed",function(){e.onReposition()}),this._google=o,t.maps.event.addListenerOnce(o,"idle",function(){e._checkZoomLevels()})}},_checkZoomLevels:function(){this._google.getZoom()!==this._map.getZoom()&&this._map.setZoom(this._google.getZoom())},_resetCallback:function(t){this._reset(t.hard)},_reset:function(t){this._initContainer()},_update:function(o){if(this._google){this._resize();var e=o&&o.latlng?o.latlng:this._map.getCenter(),n=new t.maps.LatLng(e.lat,e.lng);this._google.setCenter(n),this._google.setZoom(this._map.getZoom()),this._checkZoomLevels()}},_resize:function(){var t=this._map.getSize();(this._container.style.width!==t.x||this._container.style.height!==t.y)&&(this.setElementSize(this._container,t),this.onReposition())},_handleZoomAnim:function(o){var e=o.center,n=new t.maps.LatLng(e.lat,e.lng);this._google.setCenter(n),this._google.setZoom(o.zoom)},onReposition:function(){this._google&&t.maps.event.trigger(this._google,"resize")}}),o.Google.asyncWait=[],o.Google.asyncInitialize=function(){var t;for(t=0;t<o.Google.asyncWait.length;t++){var e=o.Google.asyncWait[t];e._ready=!0,e._container&&(e._initMapObject(),e._update())}o.Google.asyncWait=[]}}(window.google,L),L.Control.Locate=L.Control.extend({options:{position:"topleft",drawCircle:!0,follow:!1,stopFollowingOnDrag:!1,circleStyle:{color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:2,opacity:.5},markerStyle:{color:"#136AEC",fillColor:"#2A93EE",fillOpacity:.7,weight:2,opacity:.9,radius:5},followCircleStyle:{},followMarkerStyle:{},icon:"icon-location",iconLoading:"icon-spinner animate-spin",circlePadding:[0,0],metric:!0,onLocationError:function(t){alert(t.message)},onLocationOutsideMapBounds:function(t){t.stopLocate(),alert(context.options.strings.outsideMapBoundsMsg)},setView:!0,keepCurrentZoomLevel:!1,strings:{title:"Show me where I am",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0}},onAdd:function(t){var o=L.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control"),e=this;this._layer=new L.LayerGroup,this._layer.addTo(t),this._event=void 0,this._locateOptions=this.options.locateOptions,L.extend(this._locateOptions,this.options.locateOptions),L.extend(this._locateOptions,{setView:!1});var n={};L.extend(n,this.options.markerStyle,this.options.followMarkerStyle),this.options.followMarkerStyle=n,n={},L.extend(n,this.options.circleStyle,this.options.followCircleStyle),this.options.followCircleStyle=n;var i=L.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single "+this.options.icon,o);i.href="#",i.title=this.options.strings.title,L.DomEvent.on(i,"click",L.DomEvent.stopPropagation).on(i,"click",L.DomEvent.preventDefault).on(i,"click",function(){e._active&&(void 0===e._event||t.getBounds().contains(e._event.latlng)||!e.options.setView||c())?m():a()}).on(i,"dblclick",L.DomEvent.stopPropagation);var a=function(){e.options.setView&&(e._locateOnNextLocationFound=!0),e._active||t.locate(e._locateOptions),e._active=!0,e.options.follow&&r(),e._event?u():d("requesting")},l=function(t){e._event&&e._event.latlng.lat===t.latlng.lat&&e._event.latlng.lng===t.latlng.lng&&e._event.accuracy===t.accuracy||e._active&&(e._event=t,e.options.follow&&e._following&&(e._locateOnNextLocationFound=!0),u())},r=function(){t.fire("startfollowing",e),e._following=!0,e.options.stopFollowingOnDrag&&t.on("dragstart",s)},s=function(){t.fire("stopfollowing",e),e._following=!1,e.options.stopFollowingOnDrag&&t.off("dragstart",s),u()},c=function(){return void 0===e._event?!1:t.options.maxBounds&&!t.options.maxBounds.contains(e._event.latlng)},u=function(){void 0===e._event.accuracy&&(e._event.accuracy=0);var o=e._event.accuracy;e._locateOnNextLocationFound&&(c()?e.options.onLocationOutsideMapBounds(e):t.fitBounds(e._event.bounds,{padding:e.options.circlePadding,maxZoom:e.options.keepCurrentZoomLevel?t.getZoom():e._locateOptions.maxZoom}),e._locateOnNextLocationFound=!1);var n,i;if(e.options.drawCircle)if(n=e._following?e.options.followCircleStyle:e.options.circleStyle,e._circle){e._circle.setLatLng(e._event.latlng).setRadius(o);for(i in n)e._circle.options[i]=n[i]}else e._circle=L.circle(e._event.latlng,o,n).addTo(e._layer);var a,l;e.options.metric?(a=o.toFixed(0),l="meters"):(a=(3.2808399*o).toFixed(0),l="feet");var r;r=e._following?e.options.followMarkerStyle:e.options.markerStyle;var s=e.options.strings.popup;if(e._circleMarker){e._circleMarker.setLatLng(e._event.latlng).bindPopup(L.Util.template(s,{distance:a,unit:l}))._popup.setLatLng(e._event.latlng);for(i in r)e._circleMarker.options[i]=r[i]}else e._circleMarker=L.circleMarker(e._event.latlng,r).bindPopup(L.Util.template(s,{distance:a,unit:l})).addTo(e._layer);e._container&&d(e._following?"following":"active")},d=function(t){"requesting"==t?(L.DomUtil.removeClasses(e._container,"active following"),L.DomUtil.addClasses(e._container,"requesting"),L.DomUtil.removeClasses(i,e.options.icon),L.DomUtil.addClasses(i,e.options.iconLoading)):"active"==t?(L.DomUtil.removeClasses(e._container,"requesting following"),L.DomUtil.addClasses(e._container,"active"),L.DomUtil.removeClasses(i,e.options.iconLoading),L.DomUtil.addClasses(i,e.options.icon)):"following"==t&&(L.DomUtil.removeClasses(e._container,"requesting"),L.DomUtil.addClasses(e._container,"active following"),L.DomUtil.removeClasses(i,e.options.iconLoading),L.DomUtil.addClasses(i,e.options.icon))},p=function(){e._active=!1,e._locateOnNextLocationFound=e.options.setView,e._following=!1};p();var m=function(){t.stopLocate(),t.off("dragstart",s),e.options.follow&&e._following&&s(),L.DomUtil.removeClass(e._container,"requesting"),L.DomUtil.removeClass(e._container,"active"),L.DomUtil.removeClass(e._container,"following"),p(),e._layer.clearLayers(),e._circleMarker=void 0,e._circle=void 0},f=function(t){3==t.code&&e._locateOptions.watch||(m(),e.options.onLocationError(t))};return t.on("locationfound",l,e),t.on("locationerror",f,e),this.locate=a,this.stopLocate=m,this.stopFollowing=s,o}}),L.Map.addInitHook(function(){this.options.locateControl&&(this.locateControl=L.control.locate(),this.addControl(this.locateControl))}),L.control.locate=function(t){return new L.Control.Locate(t)},function(){var t=function(t,o,e){e=e.split(" "),e.forEach(function(e){L.DomUtil[t].call(this,o,e)})};L.DomUtil.addClasses=function(o,e){t("addClass",o,e)},L.DomUtil.removeClasses=function(o,e){t("removeClass",o,e)}}();var t,o,e,n,i,a,l,r,s,c,u,d,p,m,f;r=function(){return window.scrollTo(0,0)},window.addEventListener("orientationchange",r),r(),e=new L.Google("ROADMAP"),c=new L.Google("SATELLITE"),m=new L.Google("TERRAIN"),f=L.tileLayer("http://s3-eu-west-1.amazonaws.com/topo-slovenia/z{z}/{y}/{x}.png",{minZoom:10,maxNativeZoom:15,detectRetina:!0,attribution:'© <a href="http://www.gu.gov.si/">GURS</a>'}),i=L.map("map",{layers:e,minZoom:6}).setView([46,14.7],8),L.control.scale({imperial:!1}).addTo(i),L.control.layers({Google:e,Satellite:c,Terrain:m,Topo:f}).addTo(i),n=L.control.locate({follow:!0,locateOptions:{maxZoom:15,watch:!0}}).addTo(i),i.on("startfollowing",function(){return i.on("dragstart",n.stopFollowing)}),i.on("stopfollowing",function(){return i.off("dragstart",n.stopFollowing)}),n.locate(),o=function(t){var o;return n._event&&n._active?(o=t.distanceTo(n._event.latlng),Number(o.toFixed(1)).toLocaleString()+" m"):void 0},d=function(){var t;return this.unbindPopup(),t=o(this.getLatLng()),t?this.bindPopup(t).openPopup():void 0},t=function(t){var o;return o=L.marker(t,{draggable:!0}).addTo(i).on("dragend",u).on("dblclick",s).on("click",d),l.push(o)},s=function(t){return this.closePopup(),i.removeLayer(this),l.splice(l.indexOf(this),1),u()},a=function(t){return t.getLatLng()},u=function(){return store.set("markers",l.map(a))},l=[],p=store.get("markers")||[],p.forEach(function(o){return t(o)}),i.on("click",function(o){return t(o.latlng),u()})}).call(this);